@page
@model ChangePasswordModel
@{
    ViewData["Title"] = "Change password";
    ViewData["ActivePage"] = ManageNavPages.ChangePassword;
}

<link rel="stylesheet" href="~/css/accountManage/change-password.css" asp-append-version="true" />

<div class="change-password-page">
    <h3>Change Your Password</h3>

    <partial name="_StatusMessage" for="StatusMessage" />

    <!-- Information Section -->
    <div class="password-info">
        Update your password to keep your account secure. Choose a strong password
        that you haven't used elsewhere.
    </div>

    <div class="row">
        <div class="col-md-6">
            <!-- Password Requirements -->
            <div class="password-requirements">
                <h4>Password Requirements</h4>
                <ul class="requirements-list">
                    <li>At least 8 characters long</li>
                    <li>At least one digit</li>
                    <li>At least one lower case character</li>
                    <li>At least one upper case character</li>
                    <li>At least one unique character</li>
                </ul>
            </div>

            <form id="change-password-form" method="post">
                <div asp-validation-summary="ModelOnly" class="text-danger" role="alert"></div>

                <!-- Current Password Section -->
                <div class="section-title">
                    🔑 Current Password
                </div>

                <div class="form-floating mb-3">
                    <input asp-for="Input.OldPassword"
                           type="password"
                           class="form-control"
                           autocomplete="current-password"
                           aria-required="true"
                           placeholder="Please enter your current password." />
                    <label asp-for="Input.OldPassword" class="form-label"></label>
                    <button type="button" class="password-toggle" onclick="togglePassword('Input_OldPassword', this)">
                        👁️
                    </button>
                    <span asp-validation-for="Input.OldPassword" class="text-danger"></span>
                    <div class="helper-text">Enter your current password to continue</div>
                </div>

                <!-- New Password Section -->
                <div class="section-title">
                    🔒 New Password
                </div>

                <div class="form-floating mb-3">
                    <input asp-for="Input.NewPassword"
                           type="password"
                           class="form-control"
                           autocomplete="new-password"
                           aria-required="true"
                           placeholder="Please enter your new password." />
                    <label asp-for="Input.NewPassword" class="form-label"></label>
                    <button type="button" class="password-toggle" onclick="togglePassword('Input_NewPassword', this)">
                        👁️
                    </button>
                    <span asp-validation-for="Input.NewPassword" class="text-danger"></span>

                    <!-- Password Strength Indicator -->
                    <div class="password-strength">
                        <div class="password-strength-bar" id="strength-bar"></div>
                    </div>
                    <div class="helper-text" id="strength-text">Enter a password to see strength</div>
                </div>

                <!-- Confirm Password Section -->
                <div class="section-title">
                    🔒 Confirm New Password
                </div>

                <div class="form-floating mb-3">
                    <input asp-for="Input.ConfirmPassword"
                           type="password"
                           class="form-control"
                           autocomplete="new-password"
                           aria-required="true"
                           placeholder="Please confirm your new password." />
                    <label asp-for="Input.ConfirmPassword" class="form-label"></label>
                    <button type="button" class="password-toggle" onclick="togglePassword('Input_ConfirmPassword', this)">
                        👁️
                    </button>
                    <span asp-validation-for="Input.ConfirmPassword" class="text-danger"></span>
                    <div class="helper-text" id="match-text">Re-enter your new password to confirm</div>
                </div>

                <button type="submit" class="w-100 btn btn-lg btn-primary" id="submit-btn">
                    Update Password
                </button>
            </form>

            <!-- Security Tips -->
            <div class="security-tips">
                <h5>Security Tips</h5>
                <ul>
                    <li>Use a unique password you don't use anywhere else</li>
                    <li>Consider using a password manager</li>
                    <li>Change your password regularly</li>
                    <li>Never share your password with anyone</li>
                </ul>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="~/js/change-password.js" asp-append-version="true"></script>
}